"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/react-speech-recognition";
exports.ids = ["vendor-chunks/react-speech-recognition"];
exports.modules = {

/***/ "(ssr)/./node_modules/react-speech-recognition/dist/cc-BU0zEyYq.js":
/*!*******************************************************************!*\
  !*** ./node_modules/react-speech-recognition/dist/cc-BU0zEyYq.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _: () => (/* binding */ _async_to_generator)\n/* harmony export */ });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n        var info = gen[key](arg);\n        var value = info.value;\n    } catch (error) {\n        reject(error);\n        return;\n    }\n    if (info.done) resolve(value);\n    else Promise.resolve(value).then(_next, _throw);\n}\nfunction _async_to_generator(fn) {\n    return function() {\n        var self = this, args = arguments;\n        return new Promise(function(resolve, reject) {\n            var gen = fn.apply(self, args);\n            function _next(value) {\n                asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n            }\n            function _throw(err) {\n                asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n            }\n            _next(undefined);\n        });\n    };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtc3BlZWNoLXJlY29nbml0aW9uL2Rpc3QvY2MtQlUwekV5WXEuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVvQyIsInNvdXJjZXMiOlsiL1VzZXJzL3Nlai9NeURyaXZlL0NvZGluZ0Fzc2V0cy9lY29tbWVyY2Utc2VhcmNoLXJlY29tZW5kYXRpb24vc2hvcHBlcnMtY29uY2llcmdlLWZyb250ZW5kL25vZGVfbW9kdWxlcy9yZWFjdC1zcGVlY2gtcmVjb2duaXRpb24vZGlzdC9jYy1CVTB6RXlZcS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgICAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGluZm8uZG9uZSkgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgZWxzZSBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG59XG5mdW5jdGlvbiBfYXN5bmNfdG9fZ2VuZXJhdG9yKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICAgICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgX2FzeW5jX3RvX2dlbmVyYXRvciBhcyBfIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-speech-recognition/dist/cc-BU0zEyYq.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/react-speech-recognition/dist/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/react-speech-recognition/dist/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SpeechRecognition),\n/* harmony export */   useSpeechRecognition: () => (/* binding */ useSpeechRecognition)\n/* harmony export */ });\n/* harmony import */ var _cc_BU0zEyYq_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cc-BU0zEyYq.js */ \"(ssr)/./node_modules/react-speech-recognition/dist/cc-BU0zEyYq.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash.debounce */ \"(ssr)/./node_modules/lodash.debounce/index.js\");\n\n\n\n\nconst NativeSpeechRecognition = typeof window !== \"undefined\" && (window.SpeechRecognition || window.webkitSpeechRecognition || window.mozSpeechRecognition || window.msSpeechRecognition || window.oSpeechRecognition);\nconst isNative = (SpeechRecognition)=>SpeechRecognition === NativeSpeechRecognition;\n\nvar isAndroid = (()=>/(android)/i.test(typeof navigator !== \"undefined\" ? navigator.userAgent : \"\"));\n\nconst concatTranscripts = (...transcriptParts)=>{\n    return transcriptParts.map((t)=>t.trim()).join(\" \").trim();\n};\n// The command matching code is a modified version of Backbone.Router by Jeremy Ashkenas, under the MIT license.\nconst optionalParam = /\\s*\\((.*?)\\)\\s*/g;\nconst optionalRegex = /(\\(\\?:[^)]+\\))\\?/g;\nconst namedParam = /(\\(\\?)?:\\w+/g;\nconst splatParam = /\\*/g;\nconst escapeRegExp = /[-{}[\\]+?.,\\\\^$|#]/g;\nconst commandToRegExp = (command)=>{\n    if (command instanceof RegExp) {\n        return new RegExp(command.source, \"i\");\n    }\n    command = command.replace(escapeRegExp, \"\\\\$&\").replace(optionalParam, \"(?:$1)?\").replace(namedParam, (match, optional)=>{\n        return optional ? match : \"([^\\\\s]+)\";\n    }).replace(splatParam, \"(.*?)\").replace(optionalRegex, \"\\\\s*$1?\\\\s*\");\n    return new RegExp(\"^\" + command + \"$\", \"i\");\n};\n// this is from https://github.com/aceakash/string-similarity\nconst compareTwoStringsUsingDiceCoefficient = (first, second)=>{\n    first = first.replace(/\\s+/g, \"\").toLowerCase();\n    second = second.replace(/\\s+/g, \"\").toLowerCase();\n    if (!first.length && !second.length) return 1; // if both are empty strings\n    if (!first.length || !second.length) return 0; // if only one is empty string\n    if (first === second) return 1; // identical\n    if (first.length === 1 && second.length === 1) return 0; // both are 1-letter strings\n    if (first.length < 2 || second.length < 2) return 0; // if either is a 1-letter string\n    const firstBigrams = new Map();\n    for(let i = 0; i < first.length - 1; i++){\n        const bigram = first.substring(i, i + 2);\n        const count = firstBigrams.has(bigram) ? firstBigrams.get(bigram) + 1 : 1;\n        firstBigrams.set(bigram, count);\n    }\n    let intersectionSize = 0;\n    for(let i = 0; i < second.length - 1; i++){\n        const bigram = second.substring(i, i + 2);\n        const count = firstBigrams.has(bigram) ? firstBigrams.get(bigram) : 0;\n        if (count > 0) {\n            firstBigrams.set(bigram, count - 1);\n            intersectionSize++;\n        }\n    }\n    return 2.0 * intersectionSize / (first.length + second.length - 2);\n};\nconst browserSupportsPolyfills = ()=>{\n    return typeof window !== \"undefined\" && window.navigator !== undefined && window.navigator.mediaDevices !== undefined && window.navigator.mediaDevices.getUserMedia !== undefined && (window.AudioContext !== undefined || window.webkitAudioContext !== undefined);\n};\n\nclass RecognitionManager {\n    setSpeechRecognition(SpeechRecognition) {\n        const browserSupportsRecogniser = !!SpeechRecognition && (isNative(SpeechRecognition) || browserSupportsPolyfills());\n        if (browserSupportsRecogniser) {\n            this.disableRecognition();\n            this.recognition = new SpeechRecognition();\n            this.recognition.continuous = false;\n            this.recognition.interimResults = true;\n            this.recognition.onresult = this.updateTranscript.bind(this);\n            this.recognition.onend = this.onRecognitionDisconnect.bind(this);\n            this.recognition.onerror = this.onError.bind(this);\n        }\n        this.emitBrowserSupportsSpeechRecognitionChange(browserSupportsRecogniser);\n    }\n    subscribe(id, callbacks) {\n        this.subscribers[id] = callbacks;\n    }\n    unsubscribe(id) {\n        delete this.subscribers[id];\n    }\n    emitListeningChange(listening) {\n        this.listening = listening;\n        Object.keys(this.subscribers).forEach((id)=>{\n            const { onListeningChange } = this.subscribers[id];\n            onListeningChange(listening);\n        });\n    }\n    emitMicrophoneAvailabilityChange(isMicrophoneAvailable) {\n        this.isMicrophoneAvailable = isMicrophoneAvailable;\n        Object.keys(this.subscribers).forEach((id)=>{\n            const { onMicrophoneAvailabilityChange } = this.subscribers[id];\n            onMicrophoneAvailabilityChange(isMicrophoneAvailable);\n        });\n    }\n    emitTranscriptChange(interimTranscript, finalTranscript) {\n        Object.keys(this.subscribers).forEach((id)=>{\n            const { onTranscriptChange } = this.subscribers[id];\n            onTranscriptChange(interimTranscript, finalTranscript);\n        });\n    }\n    emitClearTranscript() {\n        Object.keys(this.subscribers).forEach((id)=>{\n            const { onClearTranscript } = this.subscribers[id];\n            onClearTranscript();\n        });\n    }\n    emitBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange) {\n        Object.keys(this.subscribers).forEach((id)=>{\n            const { onBrowserSupportsSpeechRecognitionChange, onBrowserSupportsContinuousListeningChange } = this.subscribers[id];\n            onBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange);\n            onBrowserSupportsContinuousListeningChange(browserSupportsSpeechRecognitionChange);\n        });\n    }\n    disconnect(disconnectType) {\n        if (this.recognition && this.listening) {\n            switch(disconnectType){\n                case \"ABORT\":\n                    this.pauseAfterDisconnect = true;\n                    this.abort();\n                    break;\n                case \"RESET\":\n                    this.pauseAfterDisconnect = false;\n                    this.abort();\n                    break;\n                case \"STOP\":\n                default:\n                    this.pauseAfterDisconnect = true;\n                    this.stop();\n            }\n        }\n    }\n    disableRecognition() {\n        if (this.recognition) {\n            this.recognition.onresult = ()=>{};\n            this.recognition.onend = ()=>{};\n            this.recognition.onerror = ()=>{};\n            if (this.listening) {\n                this.stopListening();\n            }\n        }\n    }\n    onError(event) {\n        if (event && event.error && event.error === \"not-allowed\") {\n            this.emitMicrophoneAvailabilityChange(false);\n            this.disableRecognition();\n        }\n    }\n    onRecognitionDisconnect() {\n        this.onStopListening();\n        this.listening = false;\n        if (this.pauseAfterDisconnect) {\n            this.emitListeningChange(false);\n        } else if (this.recognition) {\n            if (this.recognition.continuous) {\n                this.startListening({\n                    continuous: this.recognition.continuous\n                });\n            } else {\n                this.emitListeningChange(false);\n            }\n        }\n        this.pauseAfterDisconnect = false;\n    }\n    updateTranscript({ results, resultIndex }) {\n        const currentIndex = resultIndex === undefined ? results.length - 1 : resultIndex;\n        this.interimTranscript = \"\";\n        this.finalTranscript = \"\";\n        for(let i = currentIndex; i < results.length; ++i){\n            if (results[i].isFinal && (!isAndroid() || results[i][0].confidence > 0)) {\n                this.updateFinalTranscript(results[i][0].transcript);\n            } else {\n                this.interimTranscript = concatTranscripts(this.interimTranscript, results[i][0].transcript);\n            }\n        }\n        let isDuplicateResult = false;\n        if (this.interimTranscript === \"\" && this.finalTranscript !== \"\") {\n            if (this.previousResultWasFinalOnly) {\n                isDuplicateResult = true;\n            }\n            this.previousResultWasFinalOnly = true;\n        } else {\n            this.previousResultWasFinalOnly = false;\n        }\n        if (!isDuplicateResult) {\n            this.emitTranscriptChange(this.interimTranscript, this.finalTranscript);\n        }\n    }\n    updateFinalTranscript(newFinalTranscript) {\n        this.finalTranscript = concatTranscripts(this.finalTranscript, newFinalTranscript);\n    }\n    resetTranscript() {\n        this.disconnect(\"RESET\");\n    }\n    startListening() {\n        return /*#__PURE__*/ (0,_cc_BU0zEyYq_js__WEBPACK_IMPORTED_MODULE_0__._)(function*({ continuous = false, language } = {}) {\n            if (!this.recognition) {\n                return;\n            }\n            const isContinuousChanged = continuous !== this.recognition.continuous;\n            const isLanguageChanged = language && language !== this.recognition.lang;\n            if (isContinuousChanged || isLanguageChanged) {\n                if (this.listening) {\n                    yield this.stopListening();\n                }\n                this.recognition.continuous = isContinuousChanged ? continuous : this.recognition.continuous;\n                this.recognition.lang = isLanguageChanged ? language : this.recognition.lang;\n            }\n            if (!this.listening) {\n                if (!this.recognition.continuous) {\n                    this.resetTranscript();\n                    this.emitClearTranscript();\n                }\n                try {\n                    yield this.start();\n                    this.emitListeningChange(true);\n                } catch (e) {\n                    // DOMExceptions indicate a redundant microphone start - safe to swallow\n                    if (!(e instanceof DOMException)) {\n                        this.emitMicrophoneAvailabilityChange(false);\n                    }\n                }\n            }\n        }).apply(this, arguments);\n    }\n    abortListening() {\n        return /*#__PURE__*/ (0,_cc_BU0zEyYq_js__WEBPACK_IMPORTED_MODULE_0__._)(function*() {\n            this.disconnect(\"ABORT\");\n            this.emitListeningChange(false);\n            yield new Promise((resolve)=>{\n                this.onStopListening = resolve;\n            });\n        }).call(this);\n    }\n    stopListening() {\n        return /*#__PURE__*/ (0,_cc_BU0zEyYq_js__WEBPACK_IMPORTED_MODULE_0__._)(function*() {\n            this.disconnect(\"STOP\");\n            this.emitListeningChange(false);\n            yield new Promise((resolve)=>{\n                this.onStopListening = resolve;\n            });\n        }).call(this);\n    }\n    getRecognition() {\n        return this.recognition;\n    }\n    start() {\n        return /*#__PURE__*/ (0,_cc_BU0zEyYq_js__WEBPACK_IMPORTED_MODULE_0__._)(function*() {\n            if (this.recognition && !this.listening) {\n                yield this.recognition.start();\n                this.listening = true;\n            }\n        }).call(this);\n    }\n    stop() {\n        if (this.recognition && this.listening) {\n            this.recognition.stop();\n            this.listening = false;\n        }\n    }\n    abort() {\n        if (this.recognition && this.listening) {\n            this.recognition.abort();\n            this.listening = false;\n        }\n    }\n    constructor(SpeechRecognition){\n        this.recognition = null;\n        this.pauseAfterDisconnect = false;\n        this.interimTranscript = \"\";\n        this.finalTranscript = \"\";\n        this.listening = false;\n        this.isMicrophoneAvailable = true;\n        this.subscribers = {};\n        this.onStopListening = ()=>{};\n        this.previousResultWasFinalOnly = false;\n        this.resetTranscript = this.resetTranscript.bind(this);\n        this.startListening = this.startListening.bind(this);\n        this.stopListening = this.stopListening.bind(this);\n        this.abortListening = this.abortListening.bind(this);\n        this.setSpeechRecognition = this.setSpeechRecognition.bind(this);\n        this.disableRecognition = this.disableRecognition.bind(this);\n        this.setSpeechRecognition(SpeechRecognition);\n        if (isAndroid()) {\n            this.updateFinalTranscript = lodash_debounce__WEBPACK_IMPORTED_MODULE_2__(this.updateFinalTranscript, 250, {\n                leading: true\n            });\n        }\n    }\n}\n\nconst CLEAR_TRANSCRIPT = \"CLEAR_TRANSCRIPT\";\nconst APPEND_TRANSCRIPT = \"APPEND_TRANSCRIPT\";\n\nconst clearTranscript = ()=>{\n    return {\n        type: CLEAR_TRANSCRIPT\n    };\n};\nconst appendTranscript = (interimTranscript, finalTranscript)=>{\n    return {\n        type: APPEND_TRANSCRIPT,\n        payload: {\n            interimTranscript,\n            finalTranscript\n        }\n    };\n};\n\nconst transcriptReducer = (state, action)=>{\n    switch(action.type){\n        case CLEAR_TRANSCRIPT:\n            return {\n                interimTranscript: \"\",\n                finalTranscript: \"\"\n            };\n        case APPEND_TRANSCRIPT:\n            return {\n                interimTranscript: action.payload.interimTranscript,\n                finalTranscript: concatTranscripts(state.finalTranscript, action.payload.finalTranscript)\n            };\n        default:\n            throw new Error();\n    }\n};\n\nlet _browserSupportsSpeechRecognition = !!NativeSpeechRecognition;\nlet _browserSupportsContinuousListening = _browserSupportsSpeechRecognition && !isAndroid();\nlet recognitionManager;\nconst useSpeechRecognition = ({ transcribing = true, clearTranscriptOnListen = true, commands = [] } = {})=>{\n    const [recognitionManager] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(SpeechRecognition.getRecognitionManager());\n    const [browserSupportsSpeechRecognition, setBrowserSupportsSpeechRecognition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_browserSupportsSpeechRecognition);\n    const [browserSupportsContinuousListening, setBrowserSupportsContinuousListening] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_browserSupportsContinuousListening);\n    const [{ interimTranscript, finalTranscript }, dispatch] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useReducer)(transcriptReducer, {\n        interimTranscript: recognitionManager.interimTranscript,\n        finalTranscript: \"\"\n    });\n    const [listening, setListening] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(recognitionManager.listening);\n    const [isMicrophoneAvailable, setMicrophoneAvailable] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(recognitionManager.isMicrophoneAvailable);\n    const commandsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(commands);\n    commandsRef.current = commands;\n    const dispatchClearTranscript = ()=>{\n        dispatch(clearTranscript());\n    };\n    const resetTranscript = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        recognitionManager.resetTranscript();\n        dispatchClearTranscript();\n    }, [\n        recognitionManager\n    ]);\n    const testFuzzyMatch = (command, input, fuzzyMatchingThreshold)=>{\n        const commandToString = typeof command === \"object\" ? command.toString() : command;\n        const commandWithoutSpecials = commandToString.replace(/[&/\\\\#,+()!$~%.'\":*?<>{}]/g, \"\").replace(/  +/g, \" \").trim();\n        const howSimilar = compareTwoStringsUsingDiceCoefficient(commandWithoutSpecials, input);\n        if (howSimilar >= fuzzyMatchingThreshold) {\n            return {\n                command,\n                commandWithoutSpecials,\n                howSimilar,\n                isFuzzyMatch: true\n            };\n        }\n        return null;\n    };\n    const testMatch = (command, input)=>{\n        const pattern = commandToRegExp(command);\n        const result = pattern.exec(input);\n        if (result) {\n            return {\n                command,\n                parameters: result.slice(1)\n            };\n        }\n        return null;\n    };\n    const matchCommands = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newInterimTranscript, newFinalTranscript)=>{\n        commandsRef.current.forEach(({ command, callback, matchInterim = false, isFuzzyMatch = false, fuzzyMatchingThreshold = 0.8, bestMatchOnly = false })=>{\n            const input = !newFinalTranscript && matchInterim ? newInterimTranscript.trim() : newFinalTranscript.trim();\n            const subcommands = Array.isArray(command) ? command : [\n                command\n            ];\n            const results = subcommands.map((subcommand)=>{\n                if (isFuzzyMatch) {\n                    return testFuzzyMatch(subcommand, input, fuzzyMatchingThreshold);\n                }\n                return testMatch(subcommand, input);\n            }).filter((x)=>x);\n            if (isFuzzyMatch && bestMatchOnly && results.length >= 2) {\n                results.sort((a, b)=>b.howSimilar - a.howSimilar);\n                const { command, commandWithoutSpecials, howSimilar } = results[0];\n                callback(commandWithoutSpecials, input, howSimilar, {\n                    command,\n                    resetTranscript\n                });\n            } else {\n                results.forEach((result)=>{\n                    if (result.isFuzzyMatch) {\n                        const { command, commandWithoutSpecials, howSimilar } = result;\n                        callback(commandWithoutSpecials, input, howSimilar, {\n                            command,\n                            resetTranscript\n                        });\n                    } else {\n                        const { command, parameters } = result;\n                        callback(...parameters, {\n                            command,\n                            resetTranscript\n                        });\n                    }\n                });\n            }\n        });\n    }, [\n        resetTranscript\n    ]);\n    const handleTranscriptChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newInterimTranscript, newFinalTranscript)=>{\n        if (transcribing) {\n            dispatch(appendTranscript(newInterimTranscript, newFinalTranscript));\n        }\n        matchCommands(newInterimTranscript, newFinalTranscript);\n    }, [\n        matchCommands,\n        transcribing\n    ]);\n    const handleClearTranscript = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (clearTranscriptOnListen) {\n            dispatchClearTranscript();\n        }\n    }, [\n        clearTranscriptOnListen\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const id = SpeechRecognition.counter;\n        SpeechRecognition.counter += 1;\n        const callbacks = {\n            onListeningChange: setListening,\n            onMicrophoneAvailabilityChange: setMicrophoneAvailable,\n            onTranscriptChange: handleTranscriptChange,\n            onClearTranscript: handleClearTranscript,\n            onBrowserSupportsSpeechRecognitionChange: setBrowserSupportsSpeechRecognition,\n            onBrowserSupportsContinuousListeningChange: setBrowserSupportsContinuousListening\n        };\n        recognitionManager.subscribe(id, callbacks);\n        return ()=>{\n            recognitionManager.unsubscribe(id);\n        };\n    }, [\n        transcribing,\n        clearTranscriptOnListen,\n        recognitionManager,\n        handleTranscriptChange,\n        handleClearTranscript\n    ]);\n    const transcript = concatTranscripts(finalTranscript, interimTranscript);\n    return {\n        transcript,\n        interimTranscript,\n        finalTranscript,\n        listening,\n        isMicrophoneAvailable,\n        resetTranscript,\n        browserSupportsSpeechRecognition,\n        browserSupportsContinuousListening\n    };\n};\nconst SpeechRecognition = {\n    counter: 0,\n    applyPolyfill: (PolyfillSpeechRecognition)=>{\n        if (recognitionManager) {\n            recognitionManager.setSpeechRecognition(PolyfillSpeechRecognition);\n        } else {\n            recognitionManager = new RecognitionManager(PolyfillSpeechRecognition);\n        }\n        const browserSupportsPolyfill = !!PolyfillSpeechRecognition && browserSupportsPolyfills();\n        _browserSupportsSpeechRecognition = browserSupportsPolyfill;\n        _browserSupportsContinuousListening = browserSupportsPolyfill;\n    },\n    removePolyfill: ()=>{\n        if (recognitionManager) {\n            recognitionManager.setSpeechRecognition(NativeSpeechRecognition);\n        } else {\n            recognitionManager = new RecognitionManager(NativeSpeechRecognition);\n        }\n        _browserSupportsSpeechRecognition = !!NativeSpeechRecognition;\n        _browserSupportsContinuousListening = _browserSupportsSpeechRecognition && !isAndroid();\n    },\n    getRecognitionManager: ()=>{\n        if (!recognitionManager) {\n            recognitionManager = new RecognitionManager(NativeSpeechRecognition);\n        }\n        return recognitionManager;\n    },\n    getRecognition: ()=>{\n        const recognitionManager = SpeechRecognition.getRecognitionManager();\n        return recognitionManager.getRecognition();\n    },\n    startListening: ({ continuous, language } = {})=>/*#__PURE__*/ (0,_cc_BU0zEyYq_js__WEBPACK_IMPORTED_MODULE_0__._)(function*() {\n            const recognitionManager = SpeechRecognition.getRecognitionManager();\n            yield recognitionManager.startListening({\n                continuous,\n                language\n            });\n        })(),\n    stopListening: ()=>/*#__PURE__*/ (0,_cc_BU0zEyYq_js__WEBPACK_IMPORTED_MODULE_0__._)(function*() {\n            const recognitionManager = SpeechRecognition.getRecognitionManager();\n            yield recognitionManager.stopListening();\n        })(),\n    abortListening: ()=>/*#__PURE__*/ (0,_cc_BU0zEyYq_js__WEBPACK_IMPORTED_MODULE_0__._)(function*() {\n            const recognitionManager = SpeechRecognition.getRecognitionManager();\n            yield recognitionManager.abortListening();\n        })(),\n    browserSupportsSpeechRecognition: ()=>_browserSupportsSpeechRecognition,\n    browserSupportsContinuousListening: ()=>_browserSupportsContinuousListening\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtc3BlZWNoLXJlY29nbml0aW9uL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNEQ7QUFDaUI7QUFDdEM7O0FBRXZDO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25ELG1EQUFtRDtBQUNuRCxvQ0FBb0M7QUFDcEMsNkRBQTZEO0FBQzdELHlEQUF5RDtBQUN6RDtBQUNBLG1CQUFtQixzQkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1QkFBdUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlDQUFpQztBQUNyRDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVGQUF1RjtBQUMzRztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLG9CQUFvQjtBQUN0RDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrREFBbUIsYUFBYSwrQkFBK0IsSUFBSTtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNkJBQTZCLGtEQUFtQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLDZCQUE2QixrREFBbUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsa0RBQW1CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDRDQUFRO0FBQ2pEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHFFQUFxRSxJQUFJO0FBQ3pHLGlDQUFpQywrQ0FBUTtBQUN6QyxvRkFBb0YsK0NBQVE7QUFDNUYsd0ZBQXdGLCtDQUFRO0FBQ2hHLGFBQWEsb0NBQW9DLGNBQWMsaURBQVU7QUFDekU7QUFDQTtBQUNBLEtBQUs7QUFDTCxzQ0FBc0MsK0NBQVE7QUFDOUMsNERBQTRELCtDQUFRO0FBQ3BFLHdCQUF3Qiw2Q0FBTTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrREFBVztBQUN2QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0ZBQXdGO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtEQUFXO0FBQ3JDLHVDQUF1QyxvSEFBb0g7QUFDM0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSx3QkFBd0IsOENBQThDO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixjQUFjO0FBQ2Q7QUFDQTtBQUNBLGdDQUFnQyw4Q0FBOEM7QUFDOUU7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHNCQUFzQjtBQUN0QixnQ0FBZ0Msc0JBQXNCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1DQUFtQyxrREFBVztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msa0RBQVc7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHVCQUF1Qix1QkFBdUIsSUFBSSxpQkFBaUIsa0RBQW1CO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxxQ0FBcUMsa0RBQW1CO0FBQ3hEO0FBQ0E7QUFDQSxTQUFTO0FBQ1Qsc0NBQXNDLGtEQUFtQjtBQUN6RDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFOEQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZWovTXlEcml2ZS9Db2RpbmdBc3NldHMvZWNvbW1lcmNlLXNlYXJjaC1yZWNvbWVuZGF0aW9uL3Nob3BwZXJzLWNvbmNpZXJnZS1mcm9udGVuZC9ub2RlX21vZHVsZXMvcmVhY3Qtc3BlZWNoLXJlY29nbml0aW9uL2Rpc3QvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgXyBhcyBfYXN5bmNfdG9fZ2VuZXJhdG9yIH0gZnJvbSAnLi9jYy1CVTB6RXlZcS5qcyc7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVkdWNlciwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gJ2xvZGFzaC5kZWJvdW5jZSc7XG5cbmNvbnN0IE5hdGl2ZVNwZWVjaFJlY29nbml0aW9uID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAod2luZG93LlNwZWVjaFJlY29nbml0aW9uIHx8IHdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbiB8fCB3aW5kb3cubW96U3BlZWNoUmVjb2duaXRpb24gfHwgd2luZG93Lm1zU3BlZWNoUmVjb2duaXRpb24gfHwgd2luZG93Lm9TcGVlY2hSZWNvZ25pdGlvbik7XG5jb25zdCBpc05hdGl2ZSA9IChTcGVlY2hSZWNvZ25pdGlvbik9PlNwZWVjaFJlY29nbml0aW9uID09PSBOYXRpdmVTcGVlY2hSZWNvZ25pdGlvbjtcblxudmFyIGlzQW5kcm9pZCA9ICgoKT0+LyhhbmRyb2lkKS9pLnRlc3QodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiA/IG5hdmlnYXRvci51c2VyQWdlbnQgOiBcIlwiKSk7XG5cbmNvbnN0IGNvbmNhdFRyYW5zY3JpcHRzID0gKC4uLnRyYW5zY3JpcHRQYXJ0cyk9PntcbiAgICByZXR1cm4gdHJhbnNjcmlwdFBhcnRzLm1hcCgodCk9PnQudHJpbSgpKS5qb2luKFwiIFwiKS50cmltKCk7XG59O1xuLy8gVGhlIGNvbW1hbmQgbWF0Y2hpbmcgY29kZSBpcyBhIG1vZGlmaWVkIHZlcnNpb24gb2YgQmFja2JvbmUuUm91dGVyIGJ5IEplcmVteSBBc2hrZW5hcywgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuY29uc3Qgb3B0aW9uYWxQYXJhbSA9IC9cXHMqXFwoKC4qPylcXClcXHMqL2c7XG5jb25zdCBvcHRpb25hbFJlZ2V4ID0gLyhcXChcXD86W14pXStcXCkpXFw/L2c7XG5jb25zdCBuYW1lZFBhcmFtID0gLyhcXChcXD8pPzpcXHcrL2c7XG5jb25zdCBzcGxhdFBhcmFtID0gL1xcKi9nO1xuY29uc3QgZXNjYXBlUmVnRXhwID0gL1ste31bXFxdKz8uLFxcXFxeJHwjXS9nO1xuY29uc3QgY29tbWFuZFRvUmVnRXhwID0gKGNvbW1hbmQpPT57XG4gICAgaWYgKGNvbW1hbmQgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoY29tbWFuZC5zb3VyY2UsIFwiaVwiKTtcbiAgICB9XG4gICAgY29tbWFuZCA9IGNvbW1hbmQucmVwbGFjZShlc2NhcGVSZWdFeHAsIFwiXFxcXCQmXCIpLnJlcGxhY2Uob3B0aW9uYWxQYXJhbSwgXCIoPzokMSk/XCIpLnJlcGxhY2UobmFtZWRQYXJhbSwgKG1hdGNoLCBvcHRpb25hbCk9PntcbiAgICAgICAgcmV0dXJuIG9wdGlvbmFsID8gbWF0Y2ggOiBcIihbXlxcXFxzXSspXCI7XG4gICAgfSkucmVwbGFjZShzcGxhdFBhcmFtLCBcIiguKj8pXCIpLnJlcGxhY2Uob3B0aW9uYWxSZWdleCwgXCJcXFxccyokMT9cXFxccypcIik7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoXCJeXCIgKyBjb21tYW5kICsgXCIkXCIsIFwiaVwiKTtcbn07XG4vLyB0aGlzIGlzIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2FjZWFrYXNoL3N0cmluZy1zaW1pbGFyaXR5XG5jb25zdCBjb21wYXJlVHdvU3RyaW5nc1VzaW5nRGljZUNvZWZmaWNpZW50ID0gKGZpcnN0LCBzZWNvbmQpPT57XG4gICAgZmlyc3QgPSBmaXJzdC5yZXBsYWNlKC9cXHMrL2csIFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgc2Vjb25kID0gc2Vjb25kLnJlcGxhY2UoL1xccysvZywgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIWZpcnN0Lmxlbmd0aCAmJiAhc2Vjb25kLmxlbmd0aCkgcmV0dXJuIDE7IC8vIGlmIGJvdGggYXJlIGVtcHR5IHN0cmluZ3NcbiAgICBpZiAoIWZpcnN0Lmxlbmd0aCB8fCAhc2Vjb25kLmxlbmd0aCkgcmV0dXJuIDA7IC8vIGlmIG9ubHkgb25lIGlzIGVtcHR5IHN0cmluZ1xuICAgIGlmIChmaXJzdCA9PT0gc2Vjb25kKSByZXR1cm4gMTsgLy8gaWRlbnRpY2FsXG4gICAgaWYgKGZpcnN0Lmxlbmd0aCA9PT0gMSAmJiBzZWNvbmQubGVuZ3RoID09PSAxKSByZXR1cm4gMDsgLy8gYm90aCBhcmUgMS1sZXR0ZXIgc3RyaW5nc1xuICAgIGlmIChmaXJzdC5sZW5ndGggPCAyIHx8IHNlY29uZC5sZW5ndGggPCAyKSByZXR1cm4gMDsgLy8gaWYgZWl0aGVyIGlzIGEgMS1sZXR0ZXIgc3RyaW5nXG4gICAgY29uc3QgZmlyc3RCaWdyYW1zID0gbmV3IE1hcCgpO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBmaXJzdC5sZW5ndGggLSAxOyBpKyspe1xuICAgICAgICBjb25zdCBiaWdyYW0gPSBmaXJzdC5zdWJzdHJpbmcoaSwgaSArIDIpO1xuICAgICAgICBjb25zdCBjb3VudCA9IGZpcnN0QmlncmFtcy5oYXMoYmlncmFtKSA/IGZpcnN0QmlncmFtcy5nZXQoYmlncmFtKSArIDEgOiAxO1xuICAgICAgICBmaXJzdEJpZ3JhbXMuc2V0KGJpZ3JhbSwgY291bnQpO1xuICAgIH1cbiAgICBsZXQgaW50ZXJzZWN0aW9uU2l6ZSA9IDA7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHNlY29uZC5sZW5ndGggLSAxOyBpKyspe1xuICAgICAgICBjb25zdCBiaWdyYW0gPSBzZWNvbmQuc3Vic3RyaW5nKGksIGkgKyAyKTtcbiAgICAgICAgY29uc3QgY291bnQgPSBmaXJzdEJpZ3JhbXMuaGFzKGJpZ3JhbSkgPyBmaXJzdEJpZ3JhbXMuZ2V0KGJpZ3JhbSkgOiAwO1xuICAgICAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICAgICAgICBmaXJzdEJpZ3JhbXMuc2V0KGJpZ3JhbSwgY291bnQgLSAxKTtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblNpemUrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gMi4wICogaW50ZXJzZWN0aW9uU2l6ZSAvIChmaXJzdC5sZW5ndGggKyBzZWNvbmQubGVuZ3RoIC0gMik7XG59O1xuY29uc3QgYnJvd3NlclN1cHBvcnRzUG9seWZpbGxzID0gKCk9PntcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubmF2aWdhdG9yICE9PSB1bmRlZmluZWQgJiYgd2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMgIT09IHVuZGVmaW5lZCAmJiB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgIT09IHVuZGVmaW5lZCAmJiAod2luZG93LkF1ZGlvQ29udGV4dCAhPT0gdW5kZWZpbmVkIHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQgIT09IHVuZGVmaW5lZCk7XG59O1xuXG5jbGFzcyBSZWNvZ25pdGlvbk1hbmFnZXIge1xuICAgIHNldFNwZWVjaFJlY29nbml0aW9uKFNwZWVjaFJlY29nbml0aW9uKSB7XG4gICAgICAgIGNvbnN0IGJyb3dzZXJTdXBwb3J0c1JlY29nbmlzZXIgPSAhIVNwZWVjaFJlY29nbml0aW9uICYmIChpc05hdGl2ZShTcGVlY2hSZWNvZ25pdGlvbikgfHwgYnJvd3NlclN1cHBvcnRzUG9seWZpbGxzKCkpO1xuICAgICAgICBpZiAoYnJvd3NlclN1cHBvcnRzUmVjb2duaXNlcikge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlUmVjb2duaXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMucmVjb2duaXRpb24gPSBuZXcgU3BlZWNoUmVjb2duaXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMucmVjb2duaXRpb24uY29udGludW91cyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yZWNvZ25pdGlvbi5pbnRlcmltUmVzdWx0cyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlY29nbml0aW9uLm9ucmVzdWx0ID0gdGhpcy51cGRhdGVUcmFuc2NyaXB0LmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnJlY29nbml0aW9uLm9uZW5kID0gdGhpcy5vblJlY29nbml0aW9uRGlzY29ubmVjdC5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5yZWNvZ25pdGlvbi5vbmVycm9yID0gdGhpcy5vbkVycm9yLmJpbmQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0QnJvd3NlclN1cHBvcnRzU3BlZWNoUmVjb2duaXRpb25DaGFuZ2UoYnJvd3NlclN1cHBvcnRzUmVjb2duaXNlcik7XG4gICAgfVxuICAgIHN1YnNjcmliZShpZCwgY2FsbGJhY2tzKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnNbaWRdID0gY2FsbGJhY2tzO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZShpZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5zdWJzY3JpYmVyc1tpZF07XG4gICAgfVxuICAgIGVtaXRMaXN0ZW5pbmdDaGFuZ2UobGlzdGVuaW5nKSB7XG4gICAgICAgIHRoaXMubGlzdGVuaW5nID0gbGlzdGVuaW5nO1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnN1YnNjcmliZXJzKS5mb3JFYWNoKChpZCk9PntcbiAgICAgICAgICAgIGNvbnN0IHsgb25MaXN0ZW5pbmdDaGFuZ2UgfSA9IHRoaXMuc3Vic2NyaWJlcnNbaWRdO1xuICAgICAgICAgICAgb25MaXN0ZW5pbmdDaGFuZ2UobGlzdGVuaW5nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVtaXRNaWNyb3Bob25lQXZhaWxhYmlsaXR5Q2hhbmdlKGlzTWljcm9waG9uZUF2YWlsYWJsZSkge1xuICAgICAgICB0aGlzLmlzTWljcm9waG9uZUF2YWlsYWJsZSA9IGlzTWljcm9waG9uZUF2YWlsYWJsZTtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5zdWJzY3JpYmVycykuZm9yRWFjaCgoaWQpPT57XG4gICAgICAgICAgICBjb25zdCB7IG9uTWljcm9waG9uZUF2YWlsYWJpbGl0eUNoYW5nZSB9ID0gdGhpcy5zdWJzY3JpYmVyc1tpZF07XG4gICAgICAgICAgICBvbk1pY3JvcGhvbmVBdmFpbGFiaWxpdHlDaGFuZ2UoaXNNaWNyb3Bob25lQXZhaWxhYmxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVtaXRUcmFuc2NyaXB0Q2hhbmdlKGludGVyaW1UcmFuc2NyaXB0LCBmaW5hbFRyYW5zY3JpcHQpIHtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5zdWJzY3JpYmVycykuZm9yRWFjaCgoaWQpPT57XG4gICAgICAgICAgICBjb25zdCB7IG9uVHJhbnNjcmlwdENoYW5nZSB9ID0gdGhpcy5zdWJzY3JpYmVyc1tpZF07XG4gICAgICAgICAgICBvblRyYW5zY3JpcHRDaGFuZ2UoaW50ZXJpbVRyYW5zY3JpcHQsIGZpbmFsVHJhbnNjcmlwdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbWl0Q2xlYXJUcmFuc2NyaXB0KCkge1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnN1YnNjcmliZXJzKS5mb3JFYWNoKChpZCk9PntcbiAgICAgICAgICAgIGNvbnN0IHsgb25DbGVhclRyYW5zY3JpcHQgfSA9IHRoaXMuc3Vic2NyaWJlcnNbaWRdO1xuICAgICAgICAgICAgb25DbGVhclRyYW5zY3JpcHQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVtaXRCcm93c2VyU3VwcG9ydHNTcGVlY2hSZWNvZ25pdGlvbkNoYW5nZShicm93c2VyU3VwcG9ydHNTcGVlY2hSZWNvZ25pdGlvbkNoYW5nZSkge1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnN1YnNjcmliZXJzKS5mb3JFYWNoKChpZCk9PntcbiAgICAgICAgICAgIGNvbnN0IHsgb25Ccm93c2VyU3VwcG9ydHNTcGVlY2hSZWNvZ25pdGlvbkNoYW5nZSwgb25Ccm93c2VyU3VwcG9ydHNDb250aW51b3VzTGlzdGVuaW5nQ2hhbmdlIH0gPSB0aGlzLnN1YnNjcmliZXJzW2lkXTtcbiAgICAgICAgICAgIG9uQnJvd3NlclN1cHBvcnRzU3BlZWNoUmVjb2duaXRpb25DaGFuZ2UoYnJvd3NlclN1cHBvcnRzU3BlZWNoUmVjb2duaXRpb25DaGFuZ2UpO1xuICAgICAgICAgICAgb25Ccm93c2VyU3VwcG9ydHNDb250aW51b3VzTGlzdGVuaW5nQ2hhbmdlKGJyb3dzZXJTdXBwb3J0c1NwZWVjaFJlY29nbml0aW9uQ2hhbmdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoZGlzY29ubmVjdFR5cGUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVjb2duaXRpb24gJiYgdGhpcy5saXN0ZW5pbmcpIHtcbiAgICAgICAgICAgIHN3aXRjaChkaXNjb25uZWN0VHlwZSl7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkFCT1JUXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF1c2VBZnRlckRpc2Nvbm5lY3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJSRVNFVFwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhdXNlQWZ0ZXJEaXNjb25uZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlNUT1BcIjpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhdXNlQWZ0ZXJEaXNjb25uZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzYWJsZVJlY29nbml0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5yZWNvZ25pdGlvbikge1xuICAgICAgICAgICAgdGhpcy5yZWNvZ25pdGlvbi5vbnJlc3VsdCA9ICgpPT57fTtcbiAgICAgICAgICAgIHRoaXMucmVjb2duaXRpb24ub25lbmQgPSAoKT0+e307XG4gICAgICAgICAgICB0aGlzLnJlY29nbml0aW9uLm9uZXJyb3IgPSAoKT0+e307XG4gICAgICAgICAgICBpZiAodGhpcy5saXN0ZW5pbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkVycm9yKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudCAmJiBldmVudC5lcnJvciAmJiBldmVudC5lcnJvciA9PT0gXCJub3QtYWxsb3dlZFwiKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXRNaWNyb3Bob25lQXZhaWxhYmlsaXR5Q2hhbmdlKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZVJlY29nbml0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25SZWNvZ25pdGlvbkRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHRoaXMub25TdG9wTGlzdGVuaW5nKCk7XG4gICAgICAgIHRoaXMubGlzdGVuaW5nID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnBhdXNlQWZ0ZXJEaXNjb25uZWN0KSB7XG4gICAgICAgICAgICB0aGlzLmVtaXRMaXN0ZW5pbmdDaGFuZ2UoZmFsc2UpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVjb2duaXRpb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlY29nbml0aW9uLmNvbnRpbnVvdXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0TGlzdGVuaW5nKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludW91czogdGhpcy5yZWNvZ25pdGlvbi5jb250aW51b3VzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdExpc3RlbmluZ0NoYW5nZShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXVzZUFmdGVyRGlzY29ubmVjdCA9IGZhbHNlO1xuICAgIH1cbiAgICB1cGRhdGVUcmFuc2NyaXB0KHsgcmVzdWx0cywgcmVzdWx0SW5kZXggfSkge1xuICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSByZXN1bHRJbmRleCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0cy5sZW5ndGggLSAxIDogcmVzdWx0SW5kZXg7XG4gICAgICAgIHRoaXMuaW50ZXJpbVRyYW5zY3JpcHQgPSBcIlwiO1xuICAgICAgICB0aGlzLmZpbmFsVHJhbnNjcmlwdCA9IFwiXCI7XG4gICAgICAgIGZvcihsZXQgaSA9IGN1cnJlbnRJbmRleDsgaSA8IHJlc3VsdHMubGVuZ3RoOyArK2kpe1xuICAgICAgICAgICAgaWYgKHJlc3VsdHNbaV0uaXNGaW5hbCAmJiAoIWlzQW5kcm9pZCgpIHx8IHJlc3VsdHNbaV1bMF0uY29uZmlkZW5jZSA+IDApKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaW5hbFRyYW5zY3JpcHQocmVzdWx0c1tpXVswXS50cmFuc2NyaXB0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcmltVHJhbnNjcmlwdCA9IGNvbmNhdFRyYW5zY3JpcHRzKHRoaXMuaW50ZXJpbVRyYW5zY3JpcHQsIHJlc3VsdHNbaV1bMF0udHJhbnNjcmlwdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGlzRHVwbGljYXRlUmVzdWx0ID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmludGVyaW1UcmFuc2NyaXB0ID09PSBcIlwiICYmIHRoaXMuZmluYWxUcmFuc2NyaXB0ICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2aW91c1Jlc3VsdFdhc0ZpbmFsT25seSkge1xuICAgICAgICAgICAgICAgIGlzRHVwbGljYXRlUmVzdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNSZXN1bHRXYXNGaW5hbE9ubHkgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1Jlc3VsdFdhc0ZpbmFsT25seSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNEdXBsaWNhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdFRyYW5zY3JpcHRDaGFuZ2UodGhpcy5pbnRlcmltVHJhbnNjcmlwdCwgdGhpcy5maW5hbFRyYW5zY3JpcHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUZpbmFsVHJhbnNjcmlwdChuZXdGaW5hbFRyYW5zY3JpcHQpIHtcbiAgICAgICAgdGhpcy5maW5hbFRyYW5zY3JpcHQgPSBjb25jYXRUcmFuc2NyaXB0cyh0aGlzLmZpbmFsVHJhbnNjcmlwdCwgbmV3RmluYWxUcmFuc2NyaXB0KTtcbiAgICB9XG4gICAgcmVzZXRUcmFuc2NyaXB0KCkge1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoXCJSRVNFVFwiKTtcbiAgICB9XG4gICAgc3RhcnRMaXN0ZW5pbmcoKSB7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovIF9hc3luY190b19nZW5lcmF0b3IoZnVuY3Rpb24qKHsgY29udGludW91cyA9IGZhbHNlLCBsYW5ndWFnZSB9ID0ge30pIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5yZWNvZ25pdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlzQ29udGludW91c0NoYW5nZWQgPSBjb250aW51b3VzICE9PSB0aGlzLnJlY29nbml0aW9uLmNvbnRpbnVvdXM7XG4gICAgICAgICAgICBjb25zdCBpc0xhbmd1YWdlQ2hhbmdlZCA9IGxhbmd1YWdlICYmIGxhbmd1YWdlICE9PSB0aGlzLnJlY29nbml0aW9uLmxhbmc7XG4gICAgICAgICAgICBpZiAoaXNDb250aW51b3VzQ2hhbmdlZCB8fCBpc0xhbmd1YWdlQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxpc3RlbmluZykge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvZ25pdGlvbi5jb250aW51b3VzID0gaXNDb250aW51b3VzQ2hhbmdlZCA/IGNvbnRpbnVvdXMgOiB0aGlzLnJlY29nbml0aW9uLmNvbnRpbnVvdXM7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvZ25pdGlvbi5sYW5nID0gaXNMYW5ndWFnZUNoYW5nZWQgPyBsYW5ndWFnZSA6IHRoaXMucmVjb2duaXRpb24ubGFuZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5saXN0ZW5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmVjb2duaXRpb24uY29udGludW91cykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VHJhbnNjcmlwdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRDbGVhclRyYW5zY3JpcHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRMaXN0ZW5pbmdDaGFuZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBET01FeGNlcHRpb25zIGluZGljYXRlIGEgcmVkdW5kYW50IG1pY3JvcGhvbmUgc3RhcnQgLSBzYWZlIHRvIHN3YWxsb3dcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdE1pY3JvcGhvbmVBdmFpbGFiaWxpdHlDaGFuZ2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBhYm9ydExpc3RlbmluZygpIHtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi8gX2FzeW5jX3RvX2dlbmVyYXRvcihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoXCJBQk9SVFwiKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdExpc3RlbmluZ0NoYW5nZShmYWxzZSk7XG4gICAgICAgICAgICB5aWVsZCBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PntcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3RvcExpc3RlbmluZyA9IHJlc29sdmU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgc3RvcExpc3RlbmluZygpIHtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi8gX2FzeW5jX3RvX2dlbmVyYXRvcihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoXCJTVE9QXCIpO1xuICAgICAgICAgICAgdGhpcy5lbWl0TGlzdGVuaW5nQ2hhbmdlKGZhbHNlKTtcbiAgICAgICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlKT0+e1xuICAgICAgICAgICAgICAgIHRoaXMub25TdG9wTGlzdGVuaW5nID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBnZXRSZWNvZ25pdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjb2duaXRpb247XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qLyBfYXN5bmNfdG9fZ2VuZXJhdG9yKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlY29nbml0aW9uICYmICF0aGlzLmxpc3RlbmluZykge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucmVjb2duaXRpb24uc3RhcnQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmluZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlY29nbml0aW9uICYmIHRoaXMubGlzdGVuaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnJlY29nbml0aW9uLnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWJvcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlY29nbml0aW9uICYmIHRoaXMubGlzdGVuaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnJlY29nbml0aW9uLmFib3J0KCk7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKFNwZWVjaFJlY29nbml0aW9uKXtcbiAgICAgICAgdGhpcy5yZWNvZ25pdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMucGF1c2VBZnRlckRpc2Nvbm5lY3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbnRlcmltVHJhbnNjcmlwdCA9IFwiXCI7XG4gICAgICAgIHRoaXMuZmluYWxUcmFuc2NyaXB0ID0gXCJcIjtcbiAgICAgICAgdGhpcy5saXN0ZW5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc01pY3JvcGhvbmVBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzID0ge307XG4gICAgICAgIHRoaXMub25TdG9wTGlzdGVuaW5nID0gKCk9Pnt9O1xuICAgICAgICB0aGlzLnByZXZpb3VzUmVzdWx0V2FzRmluYWxPbmx5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVzZXRUcmFuc2NyaXB0ID0gdGhpcy5yZXNldFRyYW5zY3JpcHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zdGFydExpc3RlbmluZyA9IHRoaXMuc3RhcnRMaXN0ZW5pbmcuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zdG9wTGlzdGVuaW5nID0gdGhpcy5zdG9wTGlzdGVuaW5nLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYWJvcnRMaXN0ZW5pbmcgPSB0aGlzLmFib3J0TGlzdGVuaW5nLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2V0U3BlZWNoUmVjb2duaXRpb24gPSB0aGlzLnNldFNwZWVjaFJlY29nbml0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGlzYWJsZVJlY29nbml0aW9uID0gdGhpcy5kaXNhYmxlUmVjb2duaXRpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zZXRTcGVlY2hSZWNvZ25pdGlvbihTcGVlY2hSZWNvZ25pdGlvbik7XG4gICAgICAgIGlmIChpc0FuZHJvaWQoKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaW5hbFRyYW5zY3JpcHQgPSBkZWJvdW5jZSh0aGlzLnVwZGF0ZUZpbmFsVHJhbnNjcmlwdCwgMjUwLCB7XG4gICAgICAgICAgICAgICAgbGVhZGluZzogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IENMRUFSX1RSQU5TQ1JJUFQgPSBcIkNMRUFSX1RSQU5TQ1JJUFRcIjtcbmNvbnN0IEFQUEVORF9UUkFOU0NSSVBUID0gXCJBUFBFTkRfVFJBTlNDUklQVFwiO1xuXG5jb25zdCBjbGVhclRyYW5zY3JpcHQgPSAoKT0+e1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IENMRUFSX1RSQU5TQ1JJUFRcbiAgICB9O1xufTtcbmNvbnN0IGFwcGVuZFRyYW5zY3JpcHQgPSAoaW50ZXJpbVRyYW5zY3JpcHQsIGZpbmFsVHJhbnNjcmlwdCk9PntcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBBUFBFTkRfVFJBTlNDUklQVCxcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgaW50ZXJpbVRyYW5zY3JpcHQsXG4gICAgICAgICAgICBmaW5hbFRyYW5zY3JpcHRcbiAgICAgICAgfVxuICAgIH07XG59O1xuXG5jb25zdCB0cmFuc2NyaXB0UmVkdWNlciA9IChzdGF0ZSwgYWN0aW9uKT0+e1xuICAgIHN3aXRjaChhY3Rpb24udHlwZSl7XG4gICAgICAgIGNhc2UgQ0xFQVJfVFJBTlNDUklQVDpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaW50ZXJpbVRyYW5zY3JpcHQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgZmluYWxUcmFuc2NyaXB0OiBcIlwiXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIEFQUEVORF9UUkFOU0NSSVBUOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbnRlcmltVHJhbnNjcmlwdDogYWN0aW9uLnBheWxvYWQuaW50ZXJpbVRyYW5zY3JpcHQsXG4gICAgICAgICAgICAgICAgZmluYWxUcmFuc2NyaXB0OiBjb25jYXRUcmFuc2NyaXB0cyhzdGF0ZS5maW5hbFRyYW5zY3JpcHQsIGFjdGlvbi5wYXlsb2FkLmZpbmFsVHJhbnNjcmlwdClcbiAgICAgICAgICAgIH07XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG59O1xuXG5sZXQgX2Jyb3dzZXJTdXBwb3J0c1NwZWVjaFJlY29nbml0aW9uID0gISFOYXRpdmVTcGVlY2hSZWNvZ25pdGlvbjtcbmxldCBfYnJvd3NlclN1cHBvcnRzQ29udGludW91c0xpc3RlbmluZyA9IF9icm93c2VyU3VwcG9ydHNTcGVlY2hSZWNvZ25pdGlvbiAmJiAhaXNBbmRyb2lkKCk7XG5sZXQgcmVjb2duaXRpb25NYW5hZ2VyO1xuY29uc3QgdXNlU3BlZWNoUmVjb2duaXRpb24gPSAoeyB0cmFuc2NyaWJpbmcgPSB0cnVlLCBjbGVhclRyYW5zY3JpcHRPbkxpc3RlbiA9IHRydWUsIGNvbW1hbmRzID0gW10gfSA9IHt9KT0+e1xuICAgIGNvbnN0IFtyZWNvZ25pdGlvbk1hbmFnZXJdID0gdXNlU3RhdGUoU3BlZWNoUmVjb2duaXRpb24uZ2V0UmVjb2duaXRpb25NYW5hZ2VyKCkpO1xuICAgIGNvbnN0IFticm93c2VyU3VwcG9ydHNTcGVlY2hSZWNvZ25pdGlvbiwgc2V0QnJvd3NlclN1cHBvcnRzU3BlZWNoUmVjb2duaXRpb25dID0gdXNlU3RhdGUoX2Jyb3dzZXJTdXBwb3J0c1NwZWVjaFJlY29nbml0aW9uKTtcbiAgICBjb25zdCBbYnJvd3NlclN1cHBvcnRzQ29udGludW91c0xpc3RlbmluZywgc2V0QnJvd3NlclN1cHBvcnRzQ29udGludW91c0xpc3RlbmluZ10gPSB1c2VTdGF0ZShfYnJvd3NlclN1cHBvcnRzQ29udGludW91c0xpc3RlbmluZyk7XG4gICAgY29uc3QgW3sgaW50ZXJpbVRyYW5zY3JpcHQsIGZpbmFsVHJhbnNjcmlwdCB9LCBkaXNwYXRjaF0gPSB1c2VSZWR1Y2VyKHRyYW5zY3JpcHRSZWR1Y2VyLCB7XG4gICAgICAgIGludGVyaW1UcmFuc2NyaXB0OiByZWNvZ25pdGlvbk1hbmFnZXIuaW50ZXJpbVRyYW5zY3JpcHQsXG4gICAgICAgIGZpbmFsVHJhbnNjcmlwdDogXCJcIlxuICAgIH0pO1xuICAgIGNvbnN0IFtsaXN0ZW5pbmcsIHNldExpc3RlbmluZ10gPSB1c2VTdGF0ZShyZWNvZ25pdGlvbk1hbmFnZXIubGlzdGVuaW5nKTtcbiAgICBjb25zdCBbaXNNaWNyb3Bob25lQXZhaWxhYmxlLCBzZXRNaWNyb3Bob25lQXZhaWxhYmxlXSA9IHVzZVN0YXRlKHJlY29nbml0aW9uTWFuYWdlci5pc01pY3JvcGhvbmVBdmFpbGFibGUpO1xuICAgIGNvbnN0IGNvbW1hbmRzUmVmID0gdXNlUmVmKGNvbW1hbmRzKTtcbiAgICBjb21tYW5kc1JlZi5jdXJyZW50ID0gY29tbWFuZHM7XG4gICAgY29uc3QgZGlzcGF0Y2hDbGVhclRyYW5zY3JpcHQgPSAoKT0+e1xuICAgICAgICBkaXNwYXRjaChjbGVhclRyYW5zY3JpcHQoKSk7XG4gICAgfTtcbiAgICBjb25zdCByZXNldFRyYW5zY3JpcHQgPSB1c2VDYWxsYmFjaygoKT0+e1xuICAgICAgICByZWNvZ25pdGlvbk1hbmFnZXIucmVzZXRUcmFuc2NyaXB0KCk7XG4gICAgICAgIGRpc3BhdGNoQ2xlYXJUcmFuc2NyaXB0KCk7XG4gICAgfSwgW1xuICAgICAgICByZWNvZ25pdGlvbk1hbmFnZXJcbiAgICBdKTtcbiAgICBjb25zdCB0ZXN0RnV6enlNYXRjaCA9IChjb21tYW5kLCBpbnB1dCwgZnV6enlNYXRjaGluZ1RocmVzaG9sZCk9PntcbiAgICAgICAgY29uc3QgY29tbWFuZFRvU3RyaW5nID0gdHlwZW9mIGNvbW1hbmQgPT09IFwib2JqZWN0XCIgPyBjb21tYW5kLnRvU3RyaW5nKCkgOiBjb21tYW5kO1xuICAgICAgICBjb25zdCBjb21tYW5kV2l0aG91dFNwZWNpYWxzID0gY29tbWFuZFRvU3RyaW5nLnJlcGxhY2UoL1smL1xcXFwjLCsoKSEkfiUuJ1wiOio/PD57fV0vZywgXCJcIikucmVwbGFjZSgvICArL2csIFwiIFwiKS50cmltKCk7XG4gICAgICAgIGNvbnN0IGhvd1NpbWlsYXIgPSBjb21wYXJlVHdvU3RyaW5nc1VzaW5nRGljZUNvZWZmaWNpZW50KGNvbW1hbmRXaXRob3V0U3BlY2lhbHMsIGlucHV0KTtcbiAgICAgICAgaWYgKGhvd1NpbWlsYXIgPj0gZnV6enlNYXRjaGluZ1RocmVzaG9sZCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kLFxuICAgICAgICAgICAgICAgIGNvbW1hbmRXaXRob3V0U3BlY2lhbHMsXG4gICAgICAgICAgICAgICAgaG93U2ltaWxhcixcbiAgICAgICAgICAgICAgICBpc0Z1enp5TWF0Y2g6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBjb25zdCB0ZXN0TWF0Y2ggPSAoY29tbWFuZCwgaW5wdXQpPT57XG4gICAgICAgIGNvbnN0IHBhdHRlcm4gPSBjb21tYW5kVG9SZWdFeHAoY29tbWFuZCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHBhdHRlcm4uZXhlYyhpbnB1dCk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY29tbWFuZCxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiByZXN1bHQuc2xpY2UoMSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBjb25zdCBtYXRjaENvbW1hbmRzID0gdXNlQ2FsbGJhY2soKG5ld0ludGVyaW1UcmFuc2NyaXB0LCBuZXdGaW5hbFRyYW5zY3JpcHQpPT57XG4gICAgICAgIGNvbW1hbmRzUmVmLmN1cnJlbnQuZm9yRWFjaCgoeyBjb21tYW5kLCBjYWxsYmFjaywgbWF0Y2hJbnRlcmltID0gZmFsc2UsIGlzRnV6enlNYXRjaCA9IGZhbHNlLCBmdXp6eU1hdGNoaW5nVGhyZXNob2xkID0gMC44LCBiZXN0TWF0Y2hPbmx5ID0gZmFsc2UgfSk9PntcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gIW5ld0ZpbmFsVHJhbnNjcmlwdCAmJiBtYXRjaEludGVyaW0gPyBuZXdJbnRlcmltVHJhbnNjcmlwdC50cmltKCkgOiBuZXdGaW5hbFRyYW5zY3JpcHQudHJpbSgpO1xuICAgICAgICAgICAgY29uc3Qgc3ViY29tbWFuZHMgPSBBcnJheS5pc0FycmF5KGNvbW1hbmQpID8gY29tbWFuZCA6IFtcbiAgICAgICAgICAgICAgICBjb21tYW5kXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IHN1YmNvbW1hbmRzLm1hcCgoc3ViY29tbWFuZCk9PntcbiAgICAgICAgICAgICAgICBpZiAoaXNGdXp6eU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0RnV6enlNYXRjaChzdWJjb21tYW5kLCBpbnB1dCwgZnV6enlNYXRjaGluZ1RocmVzaG9sZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0TWF0Y2goc3ViY29tbWFuZCwgaW5wdXQpO1xuICAgICAgICAgICAgfSkuZmlsdGVyKCh4KT0+eCk7XG4gICAgICAgICAgICBpZiAoaXNGdXp6eU1hdGNoICYmIGJlc3RNYXRjaE9ubHkgJiYgcmVzdWx0cy5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgICAgIHJlc3VsdHMuc29ydCgoYSwgYik9PmIuaG93U2ltaWxhciAtIGEuaG93U2ltaWxhcik7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb21tYW5kLCBjb21tYW5kV2l0aG91dFNwZWNpYWxzLCBob3dTaW1pbGFyIH0gPSByZXN1bHRzWzBdO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGNvbW1hbmRXaXRob3V0U3BlY2lhbHMsIGlucHV0LCBob3dTaW1pbGFyLCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQsXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0VHJhbnNjcmlwdFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLmZvckVhY2goKHJlc3VsdCk9PntcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc0Z1enp5TWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY29tbWFuZCwgY29tbWFuZFdpdGhvdXRTcGVjaWFscywgaG93U2ltaWxhciB9ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soY29tbWFuZFdpdGhvdXRTcGVjaWFscywgaW5wdXQsIGhvd1NpbWlsYXIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0VHJhbnNjcmlwdFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNvbW1hbmQsIHBhcmFtZXRlcnMgfSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKC4uLnBhcmFtZXRlcnMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0VHJhbnNjcmlwdFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSwgW1xuICAgICAgICByZXNldFRyYW5zY3JpcHRcbiAgICBdKTtcbiAgICBjb25zdCBoYW5kbGVUcmFuc2NyaXB0Q2hhbmdlID0gdXNlQ2FsbGJhY2soKG5ld0ludGVyaW1UcmFuc2NyaXB0LCBuZXdGaW5hbFRyYW5zY3JpcHQpPT57XG4gICAgICAgIGlmICh0cmFuc2NyaWJpbmcpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoKGFwcGVuZFRyYW5zY3JpcHQobmV3SW50ZXJpbVRyYW5zY3JpcHQsIG5ld0ZpbmFsVHJhbnNjcmlwdCkpO1xuICAgICAgICB9XG4gICAgICAgIG1hdGNoQ29tbWFuZHMobmV3SW50ZXJpbVRyYW5zY3JpcHQsIG5ld0ZpbmFsVHJhbnNjcmlwdCk7XG4gICAgfSwgW1xuICAgICAgICBtYXRjaENvbW1hbmRzLFxuICAgICAgICB0cmFuc2NyaWJpbmdcbiAgICBdKTtcbiAgICBjb25zdCBoYW5kbGVDbGVhclRyYW5zY3JpcHQgPSB1c2VDYWxsYmFjaygoKT0+e1xuICAgICAgICBpZiAoY2xlYXJUcmFuc2NyaXB0T25MaXN0ZW4pIHtcbiAgICAgICAgICAgIGRpc3BhdGNoQ2xlYXJUcmFuc2NyaXB0KCk7XG4gICAgICAgIH1cbiAgICB9LCBbXG4gICAgICAgIGNsZWFyVHJhbnNjcmlwdE9uTGlzdGVuXG4gICAgXSk7XG4gICAgdXNlRWZmZWN0KCgpPT57XG4gICAgICAgIGNvbnN0IGlkID0gU3BlZWNoUmVjb2duaXRpb24uY291bnRlcjtcbiAgICAgICAgU3BlZWNoUmVjb2duaXRpb24uY291bnRlciArPSAxO1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvbkxpc3RlbmluZ0NoYW5nZTogc2V0TGlzdGVuaW5nLFxuICAgICAgICAgICAgb25NaWNyb3Bob25lQXZhaWxhYmlsaXR5Q2hhbmdlOiBzZXRNaWNyb3Bob25lQXZhaWxhYmxlLFxuICAgICAgICAgICAgb25UcmFuc2NyaXB0Q2hhbmdlOiBoYW5kbGVUcmFuc2NyaXB0Q2hhbmdlLFxuICAgICAgICAgICAgb25DbGVhclRyYW5zY3JpcHQ6IGhhbmRsZUNsZWFyVHJhbnNjcmlwdCxcbiAgICAgICAgICAgIG9uQnJvd3NlclN1cHBvcnRzU3BlZWNoUmVjb2duaXRpb25DaGFuZ2U6IHNldEJyb3dzZXJTdXBwb3J0c1NwZWVjaFJlY29nbml0aW9uLFxuICAgICAgICAgICAgb25Ccm93c2VyU3VwcG9ydHNDb250aW51b3VzTGlzdGVuaW5nQ2hhbmdlOiBzZXRCcm93c2VyU3VwcG9ydHNDb250aW51b3VzTGlzdGVuaW5nXG4gICAgICAgIH07XG4gICAgICAgIHJlY29nbml0aW9uTWFuYWdlci5zdWJzY3JpYmUoaWQsIGNhbGxiYWNrcyk7XG4gICAgICAgIHJldHVybiAoKT0+e1xuICAgICAgICAgICAgcmVjb2duaXRpb25NYW5hZ2VyLnVuc3Vic2NyaWJlKGlkKTtcbiAgICAgICAgfTtcbiAgICB9LCBbXG4gICAgICAgIHRyYW5zY3JpYmluZyxcbiAgICAgICAgY2xlYXJUcmFuc2NyaXB0T25MaXN0ZW4sXG4gICAgICAgIHJlY29nbml0aW9uTWFuYWdlcixcbiAgICAgICAgaGFuZGxlVHJhbnNjcmlwdENoYW5nZSxcbiAgICAgICAgaGFuZGxlQ2xlYXJUcmFuc2NyaXB0XG4gICAgXSk7XG4gICAgY29uc3QgdHJhbnNjcmlwdCA9IGNvbmNhdFRyYW5zY3JpcHRzKGZpbmFsVHJhbnNjcmlwdCwgaW50ZXJpbVRyYW5zY3JpcHQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHRyYW5zY3JpcHQsXG4gICAgICAgIGludGVyaW1UcmFuc2NyaXB0LFxuICAgICAgICBmaW5hbFRyYW5zY3JpcHQsXG4gICAgICAgIGxpc3RlbmluZyxcbiAgICAgICAgaXNNaWNyb3Bob25lQXZhaWxhYmxlLFxuICAgICAgICByZXNldFRyYW5zY3JpcHQsXG4gICAgICAgIGJyb3dzZXJTdXBwb3J0c1NwZWVjaFJlY29nbml0aW9uLFxuICAgICAgICBicm93c2VyU3VwcG9ydHNDb250aW51b3VzTGlzdGVuaW5nXG4gICAgfTtcbn07XG5jb25zdCBTcGVlY2hSZWNvZ25pdGlvbiA9IHtcbiAgICBjb3VudGVyOiAwLFxuICAgIGFwcGx5UG9seWZpbGw6IChQb2x5ZmlsbFNwZWVjaFJlY29nbml0aW9uKT0+e1xuICAgICAgICBpZiAocmVjb2duaXRpb25NYW5hZ2VyKSB7XG4gICAgICAgICAgICByZWNvZ25pdGlvbk1hbmFnZXIuc2V0U3BlZWNoUmVjb2duaXRpb24oUG9seWZpbGxTcGVlY2hSZWNvZ25pdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWNvZ25pdGlvbk1hbmFnZXIgPSBuZXcgUmVjb2duaXRpb25NYW5hZ2VyKFBvbHlmaWxsU3BlZWNoUmVjb2duaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJyb3dzZXJTdXBwb3J0c1BvbHlmaWxsID0gISFQb2x5ZmlsbFNwZWVjaFJlY29nbml0aW9uICYmIGJyb3dzZXJTdXBwb3J0c1BvbHlmaWxscygpO1xuICAgICAgICBfYnJvd3NlclN1cHBvcnRzU3BlZWNoUmVjb2duaXRpb24gPSBicm93c2VyU3VwcG9ydHNQb2x5ZmlsbDtcbiAgICAgICAgX2Jyb3dzZXJTdXBwb3J0c0NvbnRpbnVvdXNMaXN0ZW5pbmcgPSBicm93c2VyU3VwcG9ydHNQb2x5ZmlsbDtcbiAgICB9LFxuICAgIHJlbW92ZVBvbHlmaWxsOiAoKT0+e1xuICAgICAgICBpZiAocmVjb2duaXRpb25NYW5hZ2VyKSB7XG4gICAgICAgICAgICByZWNvZ25pdGlvbk1hbmFnZXIuc2V0U3BlZWNoUmVjb2duaXRpb24oTmF0aXZlU3BlZWNoUmVjb2duaXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVjb2duaXRpb25NYW5hZ2VyID0gbmV3IFJlY29nbml0aW9uTWFuYWdlcihOYXRpdmVTcGVlY2hSZWNvZ25pdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgX2Jyb3dzZXJTdXBwb3J0c1NwZWVjaFJlY29nbml0aW9uID0gISFOYXRpdmVTcGVlY2hSZWNvZ25pdGlvbjtcbiAgICAgICAgX2Jyb3dzZXJTdXBwb3J0c0NvbnRpbnVvdXNMaXN0ZW5pbmcgPSBfYnJvd3NlclN1cHBvcnRzU3BlZWNoUmVjb2duaXRpb24gJiYgIWlzQW5kcm9pZCgpO1xuICAgIH0sXG4gICAgZ2V0UmVjb2duaXRpb25NYW5hZ2VyOiAoKT0+e1xuICAgICAgICBpZiAoIXJlY29nbml0aW9uTWFuYWdlcikge1xuICAgICAgICAgICAgcmVjb2duaXRpb25NYW5hZ2VyID0gbmV3IFJlY29nbml0aW9uTWFuYWdlcihOYXRpdmVTcGVlY2hSZWNvZ25pdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlY29nbml0aW9uTWFuYWdlcjtcbiAgICB9LFxuICAgIGdldFJlY29nbml0aW9uOiAoKT0+e1xuICAgICAgICBjb25zdCByZWNvZ25pdGlvbk1hbmFnZXIgPSBTcGVlY2hSZWNvZ25pdGlvbi5nZXRSZWNvZ25pdGlvbk1hbmFnZXIoKTtcbiAgICAgICAgcmV0dXJuIHJlY29nbml0aW9uTWFuYWdlci5nZXRSZWNvZ25pdGlvbigpO1xuICAgIH0sXG4gICAgc3RhcnRMaXN0ZW5pbmc6ICh7IGNvbnRpbnVvdXMsIGxhbmd1YWdlIH0gPSB7fSk9Pi8qI19fUFVSRV9fKi8gX2FzeW5jX3RvX2dlbmVyYXRvcihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICBjb25zdCByZWNvZ25pdGlvbk1hbmFnZXIgPSBTcGVlY2hSZWNvZ25pdGlvbi5nZXRSZWNvZ25pdGlvbk1hbmFnZXIoKTtcbiAgICAgICAgICAgIHlpZWxkIHJlY29nbml0aW9uTWFuYWdlci5zdGFydExpc3RlbmluZyh7XG4gICAgICAgICAgICAgICAgY29udGludW91cyxcbiAgICAgICAgICAgICAgICBsYW5ndWFnZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKCksXG4gICAgc3RvcExpc3RlbmluZzogKCk9Pi8qI19fUFVSRV9fKi8gX2FzeW5jX3RvX2dlbmVyYXRvcihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICBjb25zdCByZWNvZ25pdGlvbk1hbmFnZXIgPSBTcGVlY2hSZWNvZ25pdGlvbi5nZXRSZWNvZ25pdGlvbk1hbmFnZXIoKTtcbiAgICAgICAgICAgIHlpZWxkIHJlY29nbml0aW9uTWFuYWdlci5zdG9wTGlzdGVuaW5nKCk7XG4gICAgICAgIH0pKCksXG4gICAgYWJvcnRMaXN0ZW5pbmc6ICgpPT4vKiNfX1BVUkVfXyovIF9hc3luY190b19nZW5lcmF0b3IoZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgY29uc3QgcmVjb2duaXRpb25NYW5hZ2VyID0gU3BlZWNoUmVjb2duaXRpb24uZ2V0UmVjb2duaXRpb25NYW5hZ2VyKCk7XG4gICAgICAgICAgICB5aWVsZCByZWNvZ25pdGlvbk1hbmFnZXIuYWJvcnRMaXN0ZW5pbmcoKTtcbiAgICAgICAgfSkoKSxcbiAgICBicm93c2VyU3VwcG9ydHNTcGVlY2hSZWNvZ25pdGlvbjogKCk9Pl9icm93c2VyU3VwcG9ydHNTcGVlY2hSZWNvZ25pdGlvbixcbiAgICBicm93c2VyU3VwcG9ydHNDb250aW51b3VzTGlzdGVuaW5nOiAoKT0+X2Jyb3dzZXJTdXBwb3J0c0NvbnRpbnVvdXNMaXN0ZW5pbmdcbn07XG5cbmV4cG9ydCB7IFNwZWVjaFJlY29nbml0aW9uIGFzIGRlZmF1bHQsIHVzZVNwZWVjaFJlY29nbml0aW9uIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-speech-recognition/dist/index.js\n");

/***/ })

};
;